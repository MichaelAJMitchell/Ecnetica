<!DOCTYPE html>
<html>
<head>
    <title>Simple Python in Browser</title>
</head>
<body>
    <h1>Run Python in Your Browser</h1>
    
    <div id="status">Loading Pyodide...</div>
    
    <textarea id="code" rows="10" cols="50">
print("Hello from Python!")
x = 5 + 3
print(f"5 + 3 = {x}")
    </textarea>
    <br><br>
    
    <button onclick="runCode()" id="runBtn" disabled>Run Python</button>
    <br><br>
    
    <div id="output"></div>

    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    <script>
        let pyodide;
        let ready = false;
        
        async function main() {
            try {
                document.getElementById("status").textContent = "Loading Pyodide (this may take 30 seconds)...";
                pyodide = await loadPyodide();
                ready = true;
                document.getElementById("status").textContent = "Pyodide loaded! You can now run Python code.";
                document.getElementById("status").style.color = "green";
                document.getElementById("runBtn").disabled = false;
                console.log("Pyodide is ready");
            } catch (error) {
                document.getElementById("status").textContent = "Error loading Pyodide: " + error;
                document.getElementById("status").style.color = "red";
                console.error("Error:", error);
            }
        }
        
        function runCode() {
            if (!ready) {
                alert("Pyodide is still loading, please wait...");
                return;
            }
            
            try {
                const code = document.getElementById("code").value;
                pyodide.runPython(`
                    import sys
                    from io import StringIO
                    sys.stdout = mystdout = StringIO()
                    ${code}
                    output = mystdout.getvalue()
                    sys.stdout = sys.__stdout__
                `);
                const output = pyodide.globals.get('output');
                document.getElementById("output").innerHTML = `<pre>${output}</pre>`;
            } catch (error) {
                document.getElementById("output").innerHTML = `<pre style="color: red;">Error: ${error}</pre>`;
            }
        }
        
        main();
    </script>
</body>
</html>